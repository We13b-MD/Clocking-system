<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Form</title>
</head>
<body>
    <html>
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
              <script src="https://unpkg.com/unlazy@0.11.3/dist/unlazy.with-hashing.iife.js" defer init></script>
              <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
              <script type="text/javascript">
                  window.tailwind.config = {
                      darkMode: ['class'],
                      theme: {
                          extend: {
                              colors: {
                                  border: 'hsl(var(--border))',
                                  input: 'hsl(var(--input))',
                                  ring: 'hsl(var(--ring))',
                                  background: 'hsl(var(--background))',
                                  foreground: 'hsl(var(--foreground))',
                                  primary: {
                                      DEFAULT: 'hsl(var(--primary))',
                                      foreground: 'hsl(var(--primary-foreground))'
                                  },
                                  secondary: {
                                      DEFAULT: 'hsl(var(--secondary))',
                                      foreground: 'hsl(var(--secondary-foreground))'
                                  },
                                  destructive: {
                                      DEFAULT: 'hsl(var(--destructive))',
                                      foreground: 'hsl(var(--destructive-foreground))'
                                  },
                                  muted: {
                                      DEFAULT: 'hsl(var(--muted))',
                                      foreground: 'hsl(var(--muted-foreground))'
                                  },
                                  accent: {
                                      DEFAULT: 'hsl(var(--accent))',
                                      foreground: 'hsl(var(--accent-foreground))'
                                  },
                                  popover: {
                                      DEFAULT: 'hsl(var(--popover))',
                                      foreground: 'hsl(var(--popover-foreground))'
                                  },
                                  card: {
                                      DEFAULT: 'hsl(var(--card))',
                                      foreground: 'hsl(var(--card-foreground))'
                                  },
                              },
                          }
                      }
                  }
              </script>
              <style type="text/tailwindcss">
                  @layer base {
                      :root {
                          --background: 0 0% 100%;
      --foreground: 224 71.4% 4.1%;
      --card: 0 0% 100%;
      --card-foreground: 224 71.4% 4.1%;
      --popover: 0 0% 100%;
      --popover-foreground: 224 71.4% 4.1%;
      --primary: 220.9 39.3% 11%;
      --primary-foreground: 210 20% 98%;
      --secondary: 220 14.3% 95.9%;
      --secondary-foreground: 220.9 39.3% 11%;
      --muted: 220 14.3% 95.9%;
      --muted-foreground: 220 8.9% 46.1%;
      --accent: 220 14.3% 95.9%;
      --accent-foreground: 220.9 39.3% 11%;
      --destructive: 0 84.2% 60.2%;
      --destructive-foreground: 210 20% 98%;
      --border: 220 13% 91%;
      --input: 220 13% 91%;
      --ring: 224 71.4% 4.1%;
      --radius: 0.35rem;
                      }
                      .dark {
                          --background: 224 71.4% 4.1%;
      --foreground: 210 20% 98%;
      --card: 224 71.4% 4.1%;
      --card-foreground: 210 20% 98%;
      --popover: 224 71.4% 4.1%;
      --popover-foreground: 210 20% 98%;
      --primary: 210 20% 98%;
      --primary-foreground: 220.9 39.3% 11%;
      --secondary: 215 27.9% 16.9%;
      --secondary-foreground: 210 20% 98%;
      --muted: 215 27.9% 16.9%;
      --muted-foreground: 217.9 10.6% 64.9%;
      --accent: 215 27.9% 16.9%;
      --accent-foreground: 210 20% 98%;
      --destructive: 0 62.8% 30.6%;
      --destructive-foreground: 210 20% 98%;
      --border: 215 27.9% 16.9%;
      --input: 215 27.9% 16.9%;
      --ring: 216 12.2% 83.9%;
                      }
                  }

                  body{
                    background-color: #1e40af
                    ;
                  }

                  .swal-modal {
             width:300px;
             height:300px;
}
              </style>
        </head>
        <body>
            <form id="form">
                <div class="flex justify-center items-center h-screen bg-gradient-to-br from-blue-400 to-blue-600">
                    <div class="bg-white p-8 rounded-lg shadow-lg">
                        <h2 class="text-2xl font-bold text-center text-blue-800 mb-4">Login</h2>
                        <form>
                            <div class="mb-4">
                                <label for="name" class="block text-blue-800">Name</label>
                                <input type="text" id="name" name="name" class="w-full px-3 py-2 border rounded-lg text-blue-800" />
                            </div>
                            <div class="mb-6">
                                <label for="password" class="block text-blue-800">Password</label>
                                <input type="password" id="password" name="password" class="w-full px-3 py-2 border rounded-lg text-blue-800" />
                            </div>
                            <button type="submit" class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600">Login</button>
                        </form>
                        <div class="mt-4 text-center">
                            <a href="#" class="text-blue-600 hover:underline">Forgot Password?</a>
                            <span class="text-blue-800 mx-2"></span>
                            <a href="signup.html" class="text-blue-600 hover:underline">Sign Up</a> <br><br>
                              
                           
                        </div>
                    </div>
                </div>
            </form>
         <script>
            // First, fix the HTML form with an id and correct the typo in "Password" label
          // Login Form Event Listener
document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('form');
    
    if (loginForm) {
        loginForm.addEventListener('submit', async function(event) {
            event.preventDefault();
            
            // Get login form values
            const name = document.getElementById('name').value;
            const password = document.getElementById('password').value;
            
            // Validate input
            if (!name || !password) {
                swal({
                    title: "Error",
                    text: "Please enter both name and password",
                    icon: "error",
                    customClass: {
                        popup: 'small-swal'
                    }
                });
                return;
            }
            
            // Get users from local storage
            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            try {
                // Hash the entered password for comparison
                const hashedPassword = await hashPassword(password);
                
                // Find the user by name and password
                const user = users.find(u => 
                    u.name.toLowerCase() === name.toLowerCase() &&
                    u.password === hashedPassword
                );
                
                if (user) {
                    // Login successful - store user info in session storage
                    sessionStorage.setItem('loggedInUser', user.name);
                    sessionStorage.setItem('userPassword', user.password);
                    
                    // Show success message
                    swal({
                        title: "Success!",
                        text: "Login successful!",
                        icon: "success",
                        customClass: {
                            popup: 'small-swal'
                        }
                    }).then(() => {
                        // Redirect to dashboard
                        window.location.href = 'dashboard.html';
                    });
                } else {
                    // Login failed
                    swal({
                        title: "Login Failed",
                        text: "Invalid name or password",
                        icon: "error",
                        customClass: {
                            popup: 'small-swal'
                        }
                    });
                }
            } catch (error) {
                console.error("Error during login:", error);
                alert("Login failed. Please try again.");
            }
        });
    } else {
        console.log('Login form not found on this page');
    }
});

// Function to hash a password using SHA-256
async function hashPassword(password) {
    // Convert the password string to an ArrayBuffer
    const encoder = new TextEncoder();
    const data = encoder.encode(password);
    
    // Generate a salt (for production, store this salt with the user record)
    // In a real application, each user should have their own unique salt
    const salt = "YourSecureSalt"; // Consider generating a random salt per user
    const saltedPassword = password + salt;
    const saltedData = encoder.encode(saltedPassword);
    
    // Hash the salted password
    const hashBuffer = await crypto.subtle.digest('SHA-256', saltedData);
    
    // Convert the hash to a hex string
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashedPassword = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    
    return hashedPassword;
}

         </script>
        </body>
      </html>
</body>
</html>